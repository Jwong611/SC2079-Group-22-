import math


INDOOR = True

# ROBOT DIMENSIONS

ROBOT_WIDTH = 25
ROBOT_HEIGHT = 28
ROBOT_ACTUAL_WIDTH = 18.8
ROBOT_VERT_OFFSET = (ROBOT_WIDTH - ROBOT_ACTUAL_WIDTH) / 2
ROBOT_MIN_CAMERA_DIST = 20


# OBSTACLE DIMENSIONS
OBSTACLE_WIDTH = 10
IMG_THICKNESS = 2
EDGE_ERR = 0.1
CONE = [10, 10, 4, 40]

# A STAR

# WayPoint Set for Indoor Setting
WPS_FL_IN = [(0, 0, 0), (0.2439202078790001, 2.018763970152681, 0.1162474683218298), (0.28025496574850794, 2.8459185512723106, 0.165254702619014), (0.2841805588392122, 3.4711581614314126, 0.20345345663469647), (0.27227774261898263, 3.989657634671202, 0.23616213478783046), (0.25096237593576465, 4.4385897190095385, 0.2654307391648058), (0.2235259423597944, 4.83717311584578, 0.29230605117390746), (0.19192704322097875, 5.196917269047647, 0.3174074276465033), (0.15744580033566735, 5.525383183664424, 0.3411369400055289), (0.08317031136168351, 6.108260132578184, 0.3855174717563411), (0.005438326160922324, 6.613987492323337, 0.42690640065184643), (-0.07288651559835846, 7.059635696138956, 0.46616589894757976), (-0.149898081950675, 7.456567780015769, 0.5038555164688107), (-0.22424046011675847, 7.812867727281512, 0.5403627590331488), (-0.29490270237169103, 8.134582036719333, 0.5759691112058164), (-0.36110585323092836, 8.426415719497793, 0.6108866352639529), (-0.4507434022011454, 8.816227026223103, 0.6623213619363437), (-0.5274287372842132, 9.15733196285169, 0.7129885918219147), (-0.5900578379247241, 9.457738758836454, 0.763195697833343), (-0.6504754353858249, 9.806181942524784, 0.8298130307207774), (-0.6878454405751877, 10.175773477060222, 0.9130998662865581), (-0.6774987271201507, 10.54949535407912, 1.0137234893821205), (-0.611703848903383, 10.874732397752304, 1.115555338015581), (-0.4999192593498831, 11.175517349216813, 1.2187850353486194), (-0.38153011930796854, 11.421242050716016, 1.3058389640808465), (-0.25089330661714637, 11.671107016423509, 1.3936800296035183), (-0.11957152432024332, 11.930093189234341, 1.482089418610597), (-2.6645352591003757e-15, 12.199999999999998, 1.5707963267948946), (-0.19999999999997708, 12.200000000000003, 1.5707963267948966)]
WPS_FR_IN = [(0, 0, 0), (0.10205573365251541, 7.7636066594016615, -0.13107480952873385), (0.4423995157430787, 10.970345983552507, -0.18589363109293217), (0.8227414636289891, 13.420292617081216, -0.22831881816878694), (1.639653346629975, 17.2770963380558, -0.29643734106481673), (2.498686804062212, 20.37788489718824, -0.3527510950621284), (3.3841391615855123, 23.027690889357622, -0.4022687453305657), (4.288845423194954, 25.36666990786445, -0.4472711857522396), (5.208829677309394, 27.473155376737488, -0.48902296803615136), (6.141618686938346, 29.396222417258855, -0.5283105323872694), (7.08555235055078, 31.16902911963113, -0.5656617323925973), (8.519860667411274, 33.59649569171029, -0.618848594544492), (9.973878545345897, 35.7938560997673, -0.6693818424571535), (11.445706721669566, 37.79935339392056, -0.7178592646839836), (12.933971679539901, 39.64034442302757, -0.7647064622169165), (14.437628479472867, 41.3371365090641, -0.8102384020739503), (15.955845030886103, 42.9052366619557, -0.854695283893273), (17.487929972824517, 44.35675000101956, -0.8982647084898734), (19.03328554214371, 45.70129101342698, -0.9410960428235174), (20.59137557913165, 46.94660063276402, -0.983310097663589), (22.161703150668938, 48.09897772287455, -1.0250058650067193), (24.273692503596244, 49.499715318814005, -1.0799337301760221), (26.405501923048377, 50.75414801676488, -1.1342428417353805), (28.55604029387038, 51.86992030766845, -1.1880596272972088), (30.72419785991739, 52.85298337867148, -1.2414862187975775), (32.908832624563274, 53.707945654692764, -1.2946060824809078), (35.10876322714771, 54.43832842527348, -1.3474882850241006), (37.32276688957378, 55.046754025992676, -1.4001908406273031), (39.54958146220452, 55.53508428132626, -1.4527634328467973), (42.349137911482806, 55.97838654883792, -1.5183625010551784), (44.999999999999936, 56.2, -1.5707963267948966)]
WPS_BR_IN = [(0, 0, 0), (1.109460218357012, -6.7376077718002545, 0.17092830859074495), (1.9016172846438923, -9.464605511649784, 0.24107935832482294), (3.3433977451025836, -13.22921816743574, 0.3391563051319749), (4.69745164550563, -16.030488841323645, 0.4132863330471811), (6.000751697710259, -18.3245951443362, 0.47490104301893954), (7.268255054932665, -20.28984959198367, 0.5284633075023646), (9.119145706532372, -22.812140325964222, 0.5984858845201798), (10.922939857482271, -24.967557819911253, 0.6597211690272581), (12.689102520155805, -26.851571101872654, 0.7145589717244014), (14.423973243621193, -28.523414683018615, 0.7644847243703998), (16.132144216566996, -30.02287754728918, 0.8104989346336932), (17.81712383758087, -31.378220520026236, 0.8533148204933779), (20.032424039408678, -32.9965741499886, 0.9063257543322651), (22.216637080784466, -34.43198338132786, 0.9555146803330947), (24.373915097632246, -35.71112098285934, 1.0015687907825286), (26.50763538457671, -36.854063037295774, 1.0450115946044511), (28.620604803803293, -37.87631432209467, 1.0862535226897634), (30.71519652313442, -38.79009289990242, 1.125624093691609), (33.31066641264048, -39.79449516597304, 1.172612558666417), (35.88397966406304, -40.65970497413276, 1.2175272830490023), (38.43802803399448, -41.397526667407384, 1.2607205998819708), (40.97530706468394, -42.01723825623431, 1.302486536043188), (43.497997705081545, -42.52615300319085, 1.343075593025383), (46.50866995201494, -42.99859208958333, 1.3905336807280115), (49.50405128490329, -43.32720036915297, 1.4369395267596694), (52.48675906957703, -43.517297496827744, 1.482586911673919), (55.45914923865789, -43.572332514434706, 1.527744758975385), (58.39999999999991, -43.5, 1.5707963267948966)]
WPS_BL_IN = [(0, 0, 0), (-0.563641862835156, 0.44106982274800766, -0.1947900701207024), (-0.9258271688858948, 0.7537847948637633, -0.3337101401030298), (-1.163049031482362, 0.934903866534651, -0.4263384083908999), (-1.4473113286495938, 1.0953687498582307, -0.5313497619572173), (-1.7826568772718339, 1.1950469865115618, -0.6389634482177263), (-2.191374617930672, 1.2180703156127386, -0.7448283709693634), (-2.6131171466783814, 1.1785551068271833, -0.8314590093806685), (-2.965386167476726, 1.1216287703370784, -0.8914397859039259), (-3.331838269213143, 1.0520730162289682, -0.9452991762944817), (-3.7121339608838375, 0.9759646729874842, -0.9943523558270293), (-4.1054449295427, 0.897628506974832, -1.0395397167327678), (-4.510739202903322, 0.8202258121065042, -1.081560545869107), (-4.926920727967218, 0.7461169374560495, -1.1209512007973077), (-5.352898158322835, 0.6770954831716212, -1.1581336433899183), (-5.787617596286757, 0.6145452939915104, -1.193447031237768), (-6.230076439177861, 0.5595488660362073, -1.2271690898454937), (-6.679327178919723, 0.5129640510158977, -1.2595310449269723), (-7.134475868403972, 0.4754794521373912, -1.2907283468635833), (-7.5946778165532045, 0.44765513774241883, -1.3209285613008013), (-8.059131915966214, 0.4299530214121142, -1.3502773020905807), (-8.52707436658925, 0.42275983387748883, -1.3789027828125664), (-8.997772196883105, 0.4264046963536, -1.4069193763427474), (-9.470516775563858, 0.4411727007593649, -1.43443045237355), (-9.944617384804932, 0.4673154945996976, -1.4615306844230258), (-10.419394852379321, 0.5050595873821413, -1.488307965515255), (-10.894175194236393, 0.5546128979222986, -1.514845036243888), (-11.249856379514407, 0.599645064841362, -1.5346378333103954), (-11.604872089924237, 0.6515079491721157, -1.5543723734452939), (-11.999999999999956, 0.6999999999999993, -1.5707963267948966)] 

# WayPoint Set for Outdoor Setting
WPS_FL_OUT = [(0, 0, 0), (0.22191085689365542, 2.231363797519327, 0.11135584446690257), (0.24554243633435185, 3.142838628770321, 0.15841289143741044), (0.23851067044433805, 3.8304868082340695, 0.19517024644595857), (0.2166706825034539, 4.399720356177487, 0.2267124384944659), (0.1861601789934898, 4.891709606785398, 0.25499847359857286), (0.15013192013770693, 5.327738673272073, 0.281028408535016), (0.11046609879436187, 5.720552620422325, 0.30539390127418015), (0.0683955977225641, 6.078523118060951, 0.328479076817715), (0.024784499132634696, 6.407513721877384, 0.3505499359654695), (-0.06466257974051937, 6.994754009564559, 0.39237380032141833), (-0.15430873667567369, 7.506204807173651, 0.4319237316276296), (-0.24183769599492755, 7.957130320867224, 0.4698597409586593), (-0.32561212933359607, 8.358064951406615, 0.5066269654374153), (-0.404402564800473, 8.71671219648398, 0.5425430238404005), (-0.47724476897818, 9.038965339491686, 0.5778443829914687), (-0.5736883712053589, 9.464098146943405, 0.6300310794433859), (-0.6529438791125357, 9.830126695716785, 0.6816986241181608), (-0.7134363543860447, 10.146798940131104, 0.7331853634304921), (-0.7629501354346484, 10.505912776708975, 0.8019832499481475), (-0.772568967910082, 10.875248171925758, 0.8888130812805715), (-0.7068202658946272, 11.2357005291815, 0.99494356524512), (-0.5907443928420788, 11.4931574487338, 1.0853458550992094), (-0.4256213433931051, 11.732097098328437, 1.1776178340100574), (-0.22144476153747483, 11.968687577691105, 1.2716529602760551), (-0.03888627730176042, 12.164943300770833, 1.3479771967209793), (0.15193477977721548, 12.372523959197084, 1.4250646420860225), (0.341934634873601, 12.59410909709505, 1.5026736445963071), (0.4000000000000208, 12.799999999999997, 1.5707963267948966)]
WPS_FR_OUT = [(0, 0, 0), (0.10816584903590942, 7.915280128949986, -0.1269078388190303), (0.44684163243250663, 11.183928895763438, -0.1801486024731867), (1.2225257600247885, 15.776031829843046, -0.2566913519355102), (2.0562661429153186, 19.263257740751502, -0.31676382831226874), (2.9225502160719206, 22.17014286945942, -0.36854994593400686), (3.811592514755151, 24.70060058154567, -0.41519748299303855), (4.718440184100957, 26.959509841981294, -0.4583105660504799), (6.10606735874896, 29.969070439689713, -0.518329407939342), (7.5216561538973945, 32.63206397031016, -0.5743912765389371), (8.961867007057366, 35.02505398257595, -0.6276388879923217), (10.424606949212897, 37.19779726216165, -0.6788101609447642), (11.908473172416944, 39.184661880864596, -0.7284126213161425), (13.412468029250629, 41.01044326956621, -0.7768115497734946), (14.935837964652956, 42.69361345769185, -0.8242788348344029), (16.477975213729977, 44.248267331797045, -0.8710219934965044), (18.562449156872482, 46.13980191739025, -0.932493560038417), (20.678201883852005, 47.84183068516197, -0.9932523132442834), (22.824078476637325, 49.36892933886978, -1.0535131763793544), (24.998840663068528, 50.7319301097658, -1.113435239405778), (27.201111289076593, 51.938888656283616, -1.1731355842475875), (29.429338796404384, 52.995754545993954, -1.2326989224426461), (31.681777627651236, 53.90685118166783, -1.2921846574812776), (33.956482280529414, 54.675227600192166, -1.3516323344469587), (36.827898304837014, 55.43801955651786, -1.425923997109528), (39.7261904619793, 55.9831507551037, -1.5002155083959363), (42.599999999999945, 56.300000000000004, -1.5707963267948966)]
WPS_BR_OUT = [(0, 0, 0), (1.1008976207845318, -6.765113758107796, 0.16927250878953445), (1.8881773803945405, -9.504926254253077, 0.23883260679665558), (3.322777009524093, -13.289426781470267, 0.33623814598017154), (4.671802110232108, -16.10728400426196, 0.4100157784676611), (5.971654250789947, -18.41607522532204, 0.47145995006090746), (7.236992520725684, -20.394599123251336, 0.5249755772935827), (9.086619614269647, -22.934607576678555, 0.5950938697053109), (10.891120304058331, -25.105442701884, 0.6565701341568244), (12.659614495845508, -27.002779623511792, 0.7117565513029568), (14.398177377115076, -28.685982953485244, 0.7621140630637101), (16.111191530618967, -30.194935446914272, 0.8086261934172884), (18.361133976474733, -31.983676819129197, 0.8658449889524674), (20.57760506871122, -33.56013895169012, 0.9186456399741485), (22.76528806097845, -34.95815484434739, 0.9678759313644826), (24.927916534328958, -36.2025919092525, 1.0141655537027308), (27.068548508998106, -37.31230449500366, 1.0579984372320765), (29.717264545231433, -38.53199239239492, 1.1099099434735717), (32.33975787099414, -39.58593013710172, 1.159166136054802), (34.93951230622581, -40.490962144655064, 1.2062339891942535), (37.519484030718104, -41.26012810224225, 1.2514922447535595), (40.082219291769874, -41.903618757845024, 1.2952554543893746), (43.13785947344319, -42.5210414000962, 1.3461712162173451), (46.17522169884797, -42.97945940563963, 1.395712361963527), (49.19724276526551, -43.28655917620202, 1.4442220033328952), (52.707008940147105, -43.46059782470723, 1.4999203583972842), (56.20313676182466, -43.44089526528902, 1.555077258831053), (57.599999999999916, -43.4, 1.5707963267948966)]
WPS_BL_OUT = [(0, 0, 0), (-0.5676969886542615, 0.6041646835589547, -0.20182252577403453), (-0.911519870903744, 1.0273330591750556, -0.345253848654185), (-1.1285668033471172, 1.2757400430433719, -0.4404920790159418), (-1.384723184102776, 1.504412429247365, -0.54797949369764), (-1.6884015346461225, 1.6641394636337536, -0.6575316735062877), (-2.0662158274648497, 1.736526993261379, -0.764677241803244), (-2.547714296485964, 1.7238367595381745, -0.8676185323687817), (-2.97851032178312, 1.6696016147993609, -0.9396696839586034), (-3.4355750887236476, 1.5956739378868823, -1.0030215684196477), (-3.916594720721902, 1.5134738221581967, -1.0598517618554604), (-4.31682294509954, 1.4469139436490617, -1.101629370595112), (-4.729229044854528, 1.3826554454060858, -1.1407416877761507), (-5.152471295926608, 1.3227521159019586, -1.1776241111746963), (-5.58528987848102, 1.268777416997175, -1.2126259296400115), (-6.026510900958316, 1.2219545061516304, -1.2460326968524542), (-6.475042582593141, 1.1832473617649168, -1.2780818479143479), (-6.929867763541026, 1.1534260118696271, -1.3089739043924642), (-7.390034890850829, 1.1331140776690782, -1.338880711699303), (-7.854648571854014, 1.122823973599497, -1.3679516295170273), (-8.322860222047101, 1.1229833265129177, -1.3963182807086327), (-8.793859028407853, 1.1339550410501031, -1.4240982679688008), (-9.266863281225405, 1.156052694704086, -1.4513981419853552), (-9.741112034333346, 1.189552447773416, -1.478315822779064), (-10.21585700047725, 1.234702312119716, -1.504942621204636), (-10.69035455603088, 1.2917293837485508, -1.531364970750256), (-11.163857706152768, 1.3608454729748447, -1.5576659548925094), (-11.599999999999957, 1.4000000000000004, -1.5707963267948966)]

# Waypoint Set
WPS_FL = WPS_FL_IN if INDOOR else WPS_FL_OUT
WPS_FR = WPS_FR_IN if INDOOR else WPS_FR_OUT
WPS_BR = WPS_BR_IN if INDOOR else WPS_BR_OUT
WPS_BL = WPS_BL_IN if INDOOR else WPS_BL_OUT

# !! Corresponding distance when moving ??  
FL_A_IN, FL_B_IN = 15.6, 21.6
FR_A_IN, FR_B_IN = 35.2, 40.6
BR_A_IN, BR_B_IN = 42.7, 34.1
BL_A_IN, BL_B_IN = 21.3, 14.9

FL_A_OUT, FL_B_OUT = 15.1, 22.2
FR_A_OUT, FR_B_OUT = 33.1, 40.7
BR_A_OUT, BR_B_OUT = 41.6, 34
BL_A_OUT, BL_B_OUT = 20.8, 14.2

FL_A, FL_B = (FL_A_IN, FL_B_IN) if INDOOR else (FL_A_OUT, FL_B_OUT)
FR_A, FR_B = (FR_A_IN, FR_B_IN) if INDOOR else (FR_A_OUT, FR_B_OUT)
BR_A, BR_B = (BR_A_IN, BR_B_IN) if INDOOR else (BR_A_OUT, BR_B_OUT)
BL_A, BL_B = (BL_A_IN, BL_B_IN) if INDOOR else (BL_A_OUT, BL_B_OUT)

# Distance step length for straight, backwards and forwards
_DIST_STR = 5
DIST_BW = _DIST_STR
DIST_FW = _DIST_STR

# circumference 
_circum = lambda a, b: math.pi * ( 3*(a+b) - math.sqrt( (3*a + b) * (a + 3*b) ) )

# x displacement, y displacement, arc length
DIST_FL = WPS_FL[-1][0], WPS_FL[-1][1], _circum(FL_A, FL_B)/4
DIST_FR = WPS_FR[-1][0], WPS_FR[-1][1], _circum(FR_A, FR_B)/4
DIST_BL = WPS_BL[-1][0], WPS_BL[-1][1], _circum(BL_A, BL_B)/4
DIST_BR = WPS_BR[-1][0], WPS_BR[-1][1], _circum(BR_A, BR_B)/4

PENALTY_STOP = 40
MAX_THETA_ERR = math.pi / 12
MAX_X_ERR = 5, 5  # L, R
MAX_Y_ERR = 7.5, 35 # U, DW


# MAP DIMENSIONS

TK_SCALE = 4  # 1 map unit = 4 screen pixels 
MAP_WIDTH = 200  # in map units
MAP_HEIGHT = 200
GRID_WIDTH = 5  # spacing of the display grid
SNAP_COORD = _DIST_STR # coordinate grid size to snap positions (rounded to multiples of 5)
SNAP_THETA = 15 # theta snapping to 0,15,30 etc...

# BUFFERS (buffer of 5 units in case of collision)
WIDTH_GRADIENT = ROBOT_WIDTH+5 
HEIGHT_GRADIENT = ROBOT_HEIGHT+5

